<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif;}
<<<<<<< HEAD
body{min-height:100vh;background:linear-gradient(-45deg,#ff6ec4,#7873f5,#4adede,#fddb92);background-size:400% 400%;animation:bg 10s infinite alternate;padding:20px;}
@keyframes bg{0%{background-position:0% 50%}100%{background-position:100% 50%}}
.card{background:rgba(0,0,0,0.7);color:white;padding:20px;border-radius:15px;margin-bottom:20px;}
h2{text-align:center;margin-bottom:10px;}
ul{list-style:none;padding-left:0;}
li{margin-bottom:6px;}
=======
body{
	min-height:100vh;background:linear-gradient(45deg,#1e1e2f,#2c2c54);
	color:white;padding:40px;
}
>>>>>>> e2dac0b037ba6a0b9733865e15e0a8690468602d
h1{text-align:center;margin-bottom:30px;}
button{
padding:10px 20px;border:none;border-radius:8px;
background:#ff6ec4;color:white;cursor:pointer;
margin:5px 0;
}
.subject-card{
    background: rgba(255,255,255,0.15);
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 10px;
    max-height: 300px;      /* maximum height for the card */
    overflow-y: auto;        /* vertical scroll if content overflows */
}
.topic-list{
    margin-left: 15px;
    margin-top: 10px;
    padding-left: 15px;
    border-left: 2px solid rgba(255,255,255,0.3);
}
.topic-list p{
    margin: 5px 0;
    white-space: nowrap;      /* prevent weird wrapping */
    overflow: hidden;
    text-overflow: ellipsis;
}
</style>
</head>
<body>
<h1>Welcome, {{ session.username }}</h1>

<div>
	<button onclick="location.href='/preferences'">Set User Preferences</button>
	<button onclick="location.href='/plan/weekly'">View Weekly Plan</button>
	<button onclick="location.href='/addtopics'">Add Subject</button>
	<button onclick="location.href='/exams'">Add Exam Date</button>
    <button onclick="location.href='/logout'">Logout</button>
</div>

<h2>Your Subjects</h2>

{% if subjects %}
{% for subject in subjects %}
<div class="subject-card">
  <h3>{{ subject.subject_name }}</h3>

<<<<<<< HEAD
  <!-- Delete Subject Button (with confirm) -->
=======
  <!-- Delete Subject Button (full width, with confirm) -->
>>>>>>> e2dac0b037ba6a0b9733865e15e0a8690468602d
  <div style="margin-top:10px;">
    <button
      onclick="if (confirm('Delete this subject and ALL its topics, exams, and scheduled sessions? This cannot be undone.')) { location.href='/deletesubject/{{ subject.subject_id }}'; }"
    >
      Delete Subject
    </button>
	<button class="btn" onclick="location.href='/edittopics/{{ subject.subject_id }}'">Edit Topics</button>

  </div>

  <!-- Exams -->
  {% if subject.exams %}
    <div style="margin:10px 0;">
      <strong>Exams:</strong>
      {% for exam in subject.exams %}
        <p>ðŸ“… {{ exam.exam_name }} â€” {{ exam.exam_date }}</p>
      {% endfor %}
    </div>
  {% else %}
    <p><em>No exam date set</em></p>
  {% endif %}

  <!-- Topics -->
  {% if subject.topics %}
    <div class="topic-list">
      {% for topic in subject.topics %}
        <p>{{ topic.topic_name }} | Difficulty: {{ topic.difficulty_level }} | Importance: {{ topic.importance }} | Confidence: {{ topic.confidence_level }} | Hrs: {{ topic.hours_required }}</p>
      {% endfor %}
    </div>
  {% else %}
    <p>No topics yet.</p>
  {% endif %}
</div>

{% endfor %}
{% else %}
  <p>You have no subjects yet. Click "Add Subject" to create one.</p>
{% endif %}
</body>
</html>
