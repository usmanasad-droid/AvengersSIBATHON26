<!DOCTYPE html>
<html>
<head>
<title>Weekly Study Plan</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif;}
body{min-height:100vh;background:linear-gradient(-45deg,#ff6ec4,#7873f5,#4adede,#fddb92);background-size:400% 400%;animation:bg 10s infinite alternate;padding:20px;}
@keyframes bg{0%{background-position:0% 50%}100%{background-position:100% 50%}}
.card{background:rgba(0,0,0,0.7);color:white;padding:20px;border-radius:15px;margin-bottom:20px;}
h2{text-align:center;margin-bottom:10px;}
ul{list-style:none;padding-left:0;}
li{margin-bottom:6px;}
button{padding:10px 20px;border:none;border-radius:8px;background:#ff6ec4;color:white;cursor:pointer;margin-top:10px;}
</style>
</head>
<body>
<<<<<<< HEAD
=======
<script>
function markComplete(sessionId) {
    fetch(`/session/complete/${sessionId}`, { method: 'POST' })
    .then(res => {
        if (res.ok) {
            // Optionally update UI immediately
            alert('Session marked complete!');
            location.reload(); // refresh the weekly plan
        } else {
            alert('Failed to mark complete.');
        }
    });
}
</script>


>>>>>>> e2dac0b037ba6a0b9733865e15e0a8690468602d
<h2>Weekly Study Plan</h2>

{% for day in weekly_plan %}
<div class="card">
  <h3>{{ day.date.strftime('%A, %d %b %Y') }}</h3>
  {% if day.sessions %}
  <ul>
<<<<<<< HEAD
    {% for s in day.sessions %}
      <li>{{ s.topic_name }} — {{ s.duration_minutes }} min</li>
    {% endfor %}
=======
	{% for s in day.sessions %}
	  <li>
		{{ s.topic_name }} — {{ s.duration_minutes }} min

		{% if s.session_id %}
		  <button onclick="markComplete({{ s.session_id }})">
			✓ Complete
		  </button>
		{% endif %}
	  </li>
	{% endfor %}

>>>>>>> e2dac0b037ba6a0b9733865e15e0a8690468602d
  </ul>
  {% else %}
  <p>No sessions scheduled.</p>
  {% endif %}
</div>
{% endfor %}

<button onclick="location.href='/dashboard'">Back to Dashboard</button>
</body>
</html>
